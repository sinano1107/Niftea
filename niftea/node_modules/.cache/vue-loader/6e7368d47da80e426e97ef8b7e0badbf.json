{"remainingRequest":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/choumasateru/Desktop/development_direction/vue/niftea/src/components/Attendance.vue?vue&type=style&index=0&id=407d6099&lang=css&scoped=true&","dependencies":[{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/src/components/Attendance.vue","mtime":1578226723255},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJhaW5ib3cgewogIC8qIOiDjOaZr+OCsOODqeODh+ODvOOCt+ODp+ODs+OCkuaMh+WumuODu+W5heOCkiAyMDAlIOOBq+OBl+OBpuOBiuOBjyAqLwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2YwMCAwJSwgI2Y4MCAxNC4yOCUsICNkZDAgMjguNTYlLCAjMGQwIDQyLjg1JSwgIzBkZCA1Ny4xNCUsICMwMGYgNzEuNDIlLCAjZTBlIDg1LjcxJSwgI2YwMCAxMDAlKSAwJSBjZW50ZXIgLyAyMDAlIGF1dG87CgogIC8qIOiDjOaZr+eUu+WDj+OCkuaWh+Wtl+OBp+ODnuOCueOCr+OBmeOCiyAqLwogICAgICAgICAgYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwoKICAvKiDmloflrZfoibLjgpLpgI/mmI7jgavjgafjgY3jgozjgbDjgojjgY8gY29sb3I6IHRyYW5zcGFyZW50IOOBp+OCgiBjb2xvcjogcmdiYSgwLCAwLCAwLCAwKSDjgafjgoLlj68gKi8KICAgICAgICAgIHRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OwoKICAvKiDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PmjIflrpogKi8KICBhbmltYXRpb246IHJhaW5ib3cgMjBzIGxpbmVhciBpbmZpbml0ZTsKfQoKLyog6IOM5pmv44Gu5qiq5L2N572u44KS44K644Op44GZICovCkBrZXlmcmFtZXMgcmFpbmJvdyB7CiAgdG8geyBiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6IDIwMCU7IH0KfQoKLnFyQ29yZCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDEwcHg7CiAgYm90dG9tOiAxMHB4Owp9CgoK"},{"version":3,"sources":["Attendance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmSA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Attendance.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n  <div>\n\n    <v-toolbar\n      dense\n      floating\n      dark\n      class=\"ma-4\"\n    >\n      <h1>{{ now }}</h1>\n    </v-toolbar>\n    <v-row>\n\n      <v-col cols=\"12\" class=\"mt-12\">\n        <div v-if=\"show\" class=\"animated\" v-bind:class=\"animated\">\n          <h1 class=\"text-center display-4 rainbow\">„Åä„ÅØ„Çà„ÅÜÔºÅ</h1>\n        </div>\n        <div v-else class=\"animated\" v-bind:class=\"animated\">\n          <h1 class=\"text-center display-4 rainbow\">„Çà„ÅÜ„Åì„ÅùN‰∏≠„Å∏</h1>\n        </div>\n      </v-col>\n      <v-col class=\"mt-12\">\n\n\n        <v-row v-if=\"rejection\" :justify=\"'center'\">\n          <v-col cols=\"8\">\n            <v-alert\n            prominent\n            type=\"error\"\n          >\n            <v-row align=\"center\">\n              <v-col>„Åì„Çå„Åã„Çâ„Éá„Éº„Çø„ÅÆÂàùÊúüÂåñ„Çí„ÅØ„Åò„ÇÅ„Åæ„Åô„ÄÇ„Ç®„É©„Éº„ÅåËµ∑„Åç„Çã„Å®ÁÆ°ÁêÜ‰∫∫„Åå„ÇØ„ÉÉ„ÇΩÂ§ßÂ§â„Å™„Çì„Åß„Åó„Å∞„Çâ„ÅèËß¶„Çâ„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ</v-col>\n            </v-row>\n          </v-alert>\n          </v-col>\n        </v-row>\n\n\n        <v-form v-else v-model=\"valid\">\n          <v-row  :justify=\"'center'\">\n            <v-col cols=\"3\">\n\n              <v-text-field\n                v-model=\"number\"\n\n                label=\"ÁôªÊ†°Áï™Âè∑„ÇíÂÖ•Âäõ„Åó„Å¶„Å≠\"\n                hint=\"„É°„Éã„É•„Éº„ÅÆ„ÄåÁôªÊ†°„Åô„Çã„Äç„ÇíÊäº„Åó„Å¶Áï™Âè∑„ÇíÂèñÂæó„Åó„Å¶„Å≠\"\n                outlined\n                rounded\n                persistent-hint\n                :rules=\"rules\"\n\n                color=\"cyan\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"1\">\n              <v-fab-transition>\n                <v-btn\n                  class=\"pink\"\n                  fab\n                  dark\n                  required\n                  v-show=\"valid\"\n                  @click=\"send()\"\n                >\n                  <v-icon>mdi-send</v-icon>\n                </v-btn>\n\n              </v-fab-transition>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-col>\n    </v-row>\n\n    <v-dialog\n      v-model=\"dialog\"\n      max-width=\"1200\"\n    >\n      <NowSeatWrapCard/>\n    </v-dialog>\n\n    <v-fab-transition>\n      <v-btn\n        color=\"cyan\"\n        fab\n        dark\n        fixed\n        x-large\n        right\n        bottom\n        outlined\n        @click=\"dialog = true\"\n      >\n        <v-icon>mdi-account-group</v-icon>\n      </v-btn>\n\n    </v-fab-transition>\n\n    <v-col cols=\"2\" class=\"qrCord\">\n      <v-img\n        :src=\"qr\"\n      ></v-img>\n    </v-col>\n\n  </div>\n\n\n\n</template>\n\n<script>\nimport firebase from 'firebase/app'\nimport 'firebase/database'\nimport 'firebase/storage'\nimport NowSeatWrapCard from './NowSeatWrapCard'\n\nexport default {\n  data() {\n    return {\n      now: '',\n      number: '',\n      show: true,\n      inAnimated: '',\n      outAnimated: '',\n      middleAnimated: '',\n      color: '',\n      animated: '',\n      rules: [v => v.length > 0 || 'ÂÜÖÂÆπ„Åå„Å™„ÅÑ„Çà„ÅÜüò≠'],\n      valid: true,\n      rejection: false, // ÊåáÂÆöÊôÇÈñì„Å´„Å™„Å£„Åü„Çâ‰∫àÁ¥Ñ„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà„Åô„Çã„Åü„ÇÅÊìç‰Ωú„ÇíÁ¶ÅÊ≠¢„Åô„Çã\n      dialog: false,\n      qr: ''//QR„Ç≥„Éº„Éâ\n    }\n  },\n  components: {\n    NowSeatWrapCard\n  },\n  created() {\n    this.getQR()\n    this.getNow()\n    setInterval(function() {\n      this.animation()\n    }.bind(this), 6000)\n  },\n  methods: {\n    getNow() {\n      setInterval(function() {\n        let now = new Date()\n        this.now = now.toLocaleString()\n        this.changeScreen(now)\n      }.bind(this), 1000)\n    },\n    async animation() {\n      let list = await this.getInAndOut()\n      this.inAnimated = list[0]\n      this.outAnimated = list[1]\n      this.middleAnimated = list[2]\n      this.show = !this.show\n\n      this.animated = list[0]\n      setTimeout(function() {\n        this.animated = list[2]\n        setTimeout(function() {\n          this.animated = list[1]\n        }.bind(this), 2000)\n      }.bind(this), 2000)\n    },\n    getInAndOut() {\n      let inList = ['bounceIn','bounceInDown','bounceInLeft','bounceInRight','bounceInUp']\n      let outList = ['bounceOut','bounceOutDown','bounceOutLeft','bounceOutRight','bounceOutUp']\n      let middleList = ['bounce','flash','pulse','rubberBand','shake','swing','tada','wobble','jello','heartBeat']\n      let inRandom = ''\n      let outRandom = ''\n      let middleRandom = ''\n      let self = this\n      return new Promise(function(resolve) {\n        // while„ÅßÈÅï„ÅÜÂÄ§„ÅåÂá∫„Çã„Åæ„Åß„É´„Éº„Éó\n        let loop = true\n        while (loop) {\n          inRandom = inList[Math.floor( Math.random() * 5 )]\n          if (self.inAnimated != inRandom) {\n            loop = false\n          }\n        }\n        // Âêå„Åò„Åèout„ÇÇ„É´„Éº„Éó\n        loop = true\n        while (loop) {\n          outRandom = outList[Math.floor( Math.random() * 5 )]\n          if (self.outAnimated != outRandom) {\n            loop = false\n          }\n        }\n        // Âêå„Åò„Åèmiddle„ÇÇ„É´„Éº„Éó\n        loop = true\n        while (loop) {\n          middleRandom = middleList[Math.floor( Math.random() * 10 )]\n          if (self.middleAnimated != middleRandom) {\n            loop = false\n          }\n        }\n        resolve([inRandom,outRandom,middleRandom])\n      })\n    },\n    dataReset(target) { // ‰∫àÁ¥Ñ„Éá„Éº„Çø„ÇÑÁèæÂú®„ÅÆ„Éá„Éº„Çø„Çí„Åô„Åπ„Å¶nil„Å´Â§â„Åà„Çã ÂºïÊï∞„ÅßÊåáÂÆö„Åï„Çå„Åü„Éá„Éº„Çø„Çínil„Å´Êõ∏„ÅçÊèõ„Åà„Çã\n      let database = firebase.database()\n      for (let i=0; i<15; i++) {\n        for (let j=0; j<6; j++) {\n          database.ref(`seats/${target}/${i}/${j}`).set('nil')\n        }\n      }\n      console.debug(`${target}:„É™„Çª„ÉÉ„ÉàÂÆå‰∫Ü`)\n    },\n    changeScreen(now) { // ÊåáÂÆöÊôÇÈñì(9:30)„Å´„Å™„Å£„Åü„Å®„Åç„Å´ÁîªÈù¢„ÇíÂàá„ÇäÊõø„Åà„Çã\n      if (now.getHours() == 9 && now.getMinutes() == 30 && now.getSeconds() == 0) {\n        let week = [\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"]\n        let dayOfWeek = week[now.getDay()-1]\n\n        this.rejection = true\n        setTimeout(()=> {\n          this.dataReset(dayOfWeek)\n          setTimeout(()=> {\n            this.rejection = false\n          }, 5000)\n        }, 5000)\n      } else if (now.getHours() == 16 && now.getMinutes() == 0 && now.getSeconds() == 0) { // ÊåáÂÆöÊôÇÈñì(16:00)„Å´ÁîªÈù¢„ÇíÂàá„ÇäÊõø„Åà„Å¶Now„Çí„É™„Çª„ÉÉ„Éà\n        this.rejection = true\n        setTimeout(()=> {\n          this.dataReset(\"Now\")\n          setTimeout(()=> {\n            this.rejection = false\n          }, 5000)\n        }, 5000)\n      } else if (now.getSeconds() == 55) {\n        // ÔºëÂàÜ„Åî„Å®„Å´attendanceData„ÇíË™ø„Åπ„Å¶ÊúüÈôê„ÅåÂàá„Çå„Å¶„ÅÑ„Çå„Å∞Ê∂à„Åô\n        this.cacheAttendanceNumber()\n        console.debug(\"ÔºëÂàÜ\")\n      }\n    },\n    cacheAttendanceNumber() { // ÔºëÂàÜÊØé„Å´attendance„ÇíÁ¢∫Ë™ç„Åó„Å¶Âè§„ÅÑ„ÇÇ„ÅÆ„ÇíÊç®„Å¶„Çã\n      let now = new Date()\n\n      let database = firebase.database()\n      let attendance = database.ref('attendance/')\n      attendance.on('value', (snapshot)=> {\n        let val = snapshot.val()\n        delete val['nil'] // Á©∫„Éá„Éº„Çø„ÅÆÂâäÈô§\n\n        for (let key in val) {\n          let timeLimitData = val[key]['timeLimit']\n          let timeLimit = new Date()\n          timeLimit.setHours(timeLimitData['Hours'])\n          timeLimit.setMinutes(timeLimitData['Minutes'])\n\n          if (timeLimit.getHours() == now.getHours() && timeLimit.getMinutes() <= now.getMinutes()) {\n            database.ref(`attendance/${key}`).remove()\n            console.debug(`${key}„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü`)\n          } else if (timeLimit.getMinutes() == 0 && now.getMinutes() == 0) { // „É™„Éü„ÉÉ„Éà„Ååx:00„ÅÆÂ†¥Âêà\n            database.ref(`attendance/${key}`).remove()\n            console.debug(`${key}„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü`)\n          }\n\n\n        }\n\n      })\n\n    },\n    send() {\n      console.log(this.number)\n      this.$router.push(`/attendance_result/${this.number}`)\n    },\n    getQR() {\n      let storage = firebase.storage()\n      let imgRef = storage.ref('QR.png')\n      imgRef.getDownloadURL().then((url)=> {\n        let xhr = new XMLHttpRequest()\n        xhr.responseType = 'blob'\n        xhr.onload = ()=> {\n          let blob = xhr.response\n          this.qr = URL.createObjectURL(blob)\n        }\n        xhr.open('GET', url)\n        xhr.send()\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.rainbow {\n  /* ËÉåÊôØ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥„ÇíÊåáÂÆö„ÉªÂπÖ„Çí 200% „Å´„Åó„Å¶„Åä„Åè */\n  background: linear-gradient(to right, #f00 0%, #f80 14.28%, #dd0 28.56%, #0d0 42.85%, #0dd 57.14%, #00f 71.42%, #e0e 85.71%, #f00 100%) 0% center / 200% auto;\n\n  /* ËÉåÊôØÁîªÂÉè„ÇíÊñáÂ≠ó„Åß„Éû„Çπ„ÇØ„Åô„Çã */\n          background-clip: text;\n  -webkit-background-clip: text;\n\n  /* ÊñáÂ≠óËâ≤„ÇíÈÄèÊòé„Å´„Åß„Åç„Çå„Å∞„Çà„Åè color: transparent „Åß„ÇÇ color: rgba(0, 0, 0, 0) „Åß„ÇÇÂèØ */\n          text-fill-color: transparent;\n  -webkit-text-fill-color: transparent;\n\n  /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÊåáÂÆö */\n  animation: rainbow 20s linear infinite;\n}\n\n/* ËÉåÊôØ„ÅÆÊ®™‰ΩçÁΩÆ„Çí„Ç∫„É©„Åô */\n@keyframes rainbow {\n  to { background-position-x: 200%; }\n}\n\n.qrCord {\n  position: fixed;\n  left: 10px;\n  bottom: 10px;\n}\n\n\n</style>\n"]}]}
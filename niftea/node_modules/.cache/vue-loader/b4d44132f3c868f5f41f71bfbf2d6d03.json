{"remainingRequest":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/choumasateru/Desktop/development_direction/vue/niftea/src/components/Attendance_result.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/src/components/Attendance_result.vue","mtime":1578226723245},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnCmltcG9ydCAnZmlyZWJhc2UvZGF0YWJhc2UnCmltcG9ydCAnZmlyZWJhc2Uvc3RvcmFnZScKaW1wb3J0IENsb2NrIGZyb20gJy4vQ2xvY2snCmltcG9ydCBOb3dTZWF0V3JhcENhcmQgZnJvbSAnLi9Ob3dTZWF0V3JhcENhcmQnCmltcG9ydCBJbmRldGVybWluYXRlIGZyb20gJy4vSW5kZXRlcm1pbmF0ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIHNlbGVjdDogZmFsc2UsCiAgICAgIHJlYWxOYW1lOiAnJywKICAgICAgdWlkOiAnJywKICAgICAgZ3JvdXA6ICcnLAogICAgICBpdGVtczogW10sCiAgICAgIHNlbGVjdEdyb3VwOiAnJywKICAgICAgbm93OiBbXQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ2xvY2ssCiAgICBOb3dTZWF0V3JhcENhcmQsCiAgICBJbmRldGVybWluYXRlCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zZWFyY2hJbnB1dE51bWJlcigpCiAgICBzZXRUaW1lb3V0KCgpPT4gewogICAgICB0aGlzLmxvYWRpbmc9ZmFsc2UKICAgIH0sIDEwMDApCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBzZWFyY2hJbnB1dE51bWJlcigpIHsKICAgICAgbGV0IGF0dGVuZGFuY2VEYXRhID0gYXdhaXQgdGhpcy5nZXRBdHRlbmRhbmNlRGF0YSgpCiAgICAgIGxldCBudW1iZXIgPSB0aGlzLiRyb3V0ZS5wYXJhbXMubnVtYmVyCiAgICAgIGNvbnNvbGUuZGVidWcoYXR0ZW5kYW5jZURhdGEpCgogICAgICB0aGlzLnNob3cgPSBudW1iZXIgaW4gYXR0ZW5kYW5jZURhdGEKICAgICAgaWYgKHRoaXMuc2hvdykgewogICAgICAgIGxldCBzZWF0ID0gYXR0ZW5kYW5jZURhdGFbbnVtYmVyXVsnc2VhdCddCiAgICAgICAgbGV0IHVpZCA9IGF0dGVuZGFuY2VEYXRhW251bWJlcl1bJ3VpZCddCiAgICAgICAgdGhpcy51aWQgPSB1aWQKICAgICAgICBsZXQgdXNlckRhdGEgPSBhd2FpdCB0aGlzLmdldFVzZXJEYXRhKHVpZCkKICAgICAgICBsZXQgbm93ID0gYXdhaXQgdGhpcy5nZXROb3dEYXRhKCkKICAgICAgICB0aGlzLm5vdyA9IG5vdwogICAgICAgIHRoaXMucmVhbE5hbWUgPSB1c2VyRGF0YVsncmVhbE5hbWUnXQogICAgICAgIGNvbnNvbGUuZGVidWcodXNlckRhdGEpCgogICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoMjAyMCwgMSwxLDE4LDU5LDApIC8vbmV3IERhdGUoMjAyMCwgMSwgMSwgOSwgMzAsIDApIC8vIOavlOi8g+WvvuixoURhdGUKICAgICAgICBsZXQgbm93RGF0ZSA9IG5ldyBEYXRlKCkgLy8g54++5Zyo5pmC5Yi7CgogICAgICAgIGlmIChkYXRlLmdldEhvdXJzKCkgPj0gbm93RGF0ZS5nZXRIb3VycygpICYmIGRhdGUuZ2V0TWludXRlcygpID49IG5vd0RhdGUuZ2V0TWludXRlcygpKSB7CiAgICAgICAgICAvLyDvvJnmmYLljYrku6XliY3jgaDjgaPjgZ/jgokKICAgICAgICAgIGNvbnNvbGUuZGVidWcoIu+8meaZguWNiuS7peWJjSIpCiAgICAgICAgICBpZiAoc2VhdCA9PSAibmlsIikgewogICAgICAgICAgICAvLyDkuojntITjgZfjgabjgYTjgarjgYvjgaPjgZ/jgokKICAgICAgICAgICAgdGhpcy5zZWxlY3QgPSB0cnVlCiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdFNlbGVjdEl0ZW0oKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5LqI57SE44GX44Gm44GE44Gf44KJCiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXJ2YXRpb25BdHRlbmRhbmNlKHVpZCxzZWF0KQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDvvJnmmYLljYrku6XpmY3jgaDjgaPjgZ/jgokKICAgICAgICAgIGNvbnNvbGUuZGVidWcoIu+8meaZguWNiuS7pemZjSIpCiAgICAgICAgICBhd2FpdCB0aGlzLnJhbmRvbUF0dGVuZGFuY2UodWlkKQogICAgICAgIH0KICAgICAgICAvLyDlhaXlipvjgZXjgozjgZ9JROOBruWJiumZpAogICAgICAgIHRoaXMucmVtb3ZlTXlOdW1iZXIoKQoKICAgICAgfQogICAgfSwKICAgIGdldEF0dGVuZGFuY2VEYXRhKCkgeyAvLyBhdHRlbmRhbmNl44Gu5oOF5aCx5LiA6Kan44KS44Go44Gj44Gm44GP44KLCiAgICAgIGxldCBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCkKICAgICAgbGV0IGF0dGVuZGFuY2UgPSBkYXRhYmFzZS5yZWYoJ2F0dGVuZGFuY2UvJykKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgICBhdHRlbmRhbmNlLm9uKCd2YWx1ZScsIChzbmFwc2hvdCk9PiB7CiAgICAgICAgICBsZXQgdmFsID0gc25hcHNob3QudmFsKCkKICAgICAgICAgIGRlbGV0ZSB2YWxbJ25pbCddIC8vIOepuuODh+ODvOOCv+OBruWJiumZpAogICAgICAgICAgcmVzb2x2ZSh2YWwpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBnZXRVc2VyRGF0YSh1aWQpIHsgLy8g44Om44O844K244O85oOF5aCx44KS44Go44Gj44Gm44GP44KLCiAgICAgIGxldCBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCkKICAgICAgbGV0IHVzZXIgPSBkYXRhYmFzZS5yZWYoYHVzZXJzLyR7dWlkfWApCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgdXNlci5vbigndmFsdWUnLCAoc25hcHNob3QpPT4gewogICAgICAgICAgcmVzb2x2ZShzbmFwc2hvdC52YWwoKSkKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGdldE5vd0RhdGEoKSB7IC8vIG5vd+aDheWgseOCkuOBqOOBo+OBpuOBj+OCiwogICAgICBsZXQgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpCiAgICAgIGxldCBub3cgPSBkYXRhYmFzZS5yZWYoJ3NlYXRzL05vdycpCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgbm93Lm9uKCd2YWx1ZScsIChzbmFwc2hvdCk9PiB7CiAgICAgICAgICByZXNvbHZlKHNuYXBzaG90LnZhbCgpKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgZ2V0UmVzZXJ2YXRpb25EYXRhKCkgewogICAgICBsZXQgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpCiAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgyMDIwLDEsNikvL25ldyBEYXRlKCkKICAgICAgbGV0IHdlZWsgPSBbIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSJdCiAgICAgIGNvbnNvbGUuZGVidWcobm93LmdldERheSgpKQogICAgICBpZiAobm93LmdldERheSgpICE9IDAgJiYgbm93LmdldERheSgpICE9IDYpIHsKICAgICAgICBsZXQgZGF5T2ZXZWVrID0gd2Vla1tub3cuZ2V0RGF5KCktMV0KICAgICAgICBsZXQgcmVzZXJ2YXRpb24gPSBkYXRhYmFzZS5yZWYoYHNlYXRzLyR7ZGF5T2ZXZWVrfWApCgogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICByZXNlcnZhdGlvbi5vbigndmFsdWUnLCAoc25hcHNob3QpPT4gewogICAgICAgICAgICByZXNvbHZlKHNuYXBzaG90LnZhbCgpKQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGluaXRTZWxlY3RJdGVtKCkgeyAvLyDjgrvjg6zjgq/jg4jjgpLliJ3mnJ/ljJbjgZnjgosKICAgICAgbGV0IG5vdyA9IHRoaXMubm93CiAgICAgIGxldCByZXNlcnZhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0UmVzZXJ2YXRpb25EYXRhKCkKICAgICAgY29uc29sZS5kZWJ1ZyhyZXNlcnZhdGlvbikKICAgICAgZm9yIChsZXQgaT0wOyBpPDE1OyBpKyspIHsKICAgICAgICAvLyBuaWzjgpLmtojjgZkKICAgICAgICBsZXQgeCA9IG5vd1tpXS5maWx0ZXIoZnVuY3Rpb24oIGl0ZW0gKSB7IHJldHVybiBpdGVtICE9ICJuaWwiIH0pCiAgICAgICAgbGV0IHkgPSByZXNlcnZhdGlvbltpXS5maWx0ZXIoZnVuY3Rpb24oIGl0ZW0gKSB7IHJldHVybiBpdGVtICE9ICJuaWwiIH0pCiAgICAgICAgY29uc29sZS5kZWJ1ZygneCcseCkKICAgICAgICBjb25zb2xlLmRlYnVnKCd5Jyx5KQogICAgICAgIGlmICgoeC5sZW5ndGggKyB5Lmxlbmd0aCkgIT0gNikgewogICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGDjgrDjg6vjg7zjg5cke2krMX1gKQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnNlbGVjdEdyb3VwID0gdGhpcy5pdGVtc1swXQogICAgfSwKICAgIHNlbGVjdEF0dGVuZGFuY2UoKSB7IC8vIOOCu+ODrOOCr+OCv+OBruaVsOWtl+OBruW4reOBp+eiuuWumig5OjMw5Lul5YmN5LqI57SE44GX44Gm44Gq44GE5Lq655SoKQogICAgICBsZXQgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpCiAgICAgIGxldCBzZWF0ID0gdGhpcy5zZWxlY3RHcm91cC5yZXBsYWNlKCfjgrDjg6vjg7zjg5cnLCcnKS0xCiAgICAgIGxldCB0YXJnZXQgPSB0aGlzLm5vd1tzZWF0XS5pbmRleE9mKCJuaWwiKQogICAgICBkYXRhYmFzZS5yZWYoYHNlYXRzL05vdy8ke3NlYXR9LyR7dGFyZ2V0fWApLnNldCh0aGlzLnVpZCkKICAgICAgdGhpcy5wYWdlUmV0dXJuKCkKICAgIH0sCiAgICByYW5kb21BdHRlbmRhbmNlKHVpZCkgeyAvLyDjg6njg7Pjg4Djg6DjgavluK3jgpLnorrlrpooOTozMOS7pemZjeeUqCkKICAgICAgbGV0IGRhdGFiYXNlID0gZmlyZWJhc2UuZGF0YWJhc2UoKQogICAgICBsZXQgbm93ID0gdGhpcy5ub3cKICAgICAgbGV0IG5vd0NvdW50ID0gW10KCiAgICAgIGZvciAobGV0IGk9MDsgaTwxNTsgaSsrKSB7CiAgICAgICAgLy8gbmls44KS5raI44GZCiAgICAgICAgbGV0IHggPSBub3dbaV0uZmlsdGVyKGZ1bmN0aW9uKCBpdGVtICkgeyByZXR1cm4gaXRlbSAhPSAibmlsIiB9KQogICAgICAgIG5vd0NvdW50LnB1c2goeC5sZW5ndGgpCiAgICAgIH0KICAgICAgbGV0IG1pbiA9IE1hdGgubWluLmFwcGx5KG51bGwsIG5vd0NvdW50KSAvLyDmnIDlsI/lgKTjgpLlj5blvpcKICAgICAgY29uc29sZS5kZWJ1Zyhub3dDb3VudCkKICAgICAgY29uc29sZS5kZWJ1ZyhtaW4pCiAgICAgIC8vIOacgOWwj+WApOOBruOCsOODq+ODvOODl0lE44KS5L+d5a2Y44GZ44KLCiAgICAgIGxldCBsaXN0ID0gW10KICAgICAgZm9yIChsZXQgaT0wOyBpPDE1OyBpKyspIHsKICAgICAgICBpZiAobm93Q291bnRbaV0gPT0gbWluKSB7CiAgICAgICAgICBsaXN0LnB1c2goaSkKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc29sZS5kZWJ1ZyhsaXN0KQoKICAgICAgLy8g5Lmx5pWw44Gu55Sf5oiQCiAgICAgIGxldCByYW5kb20gPSBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogbGlzdC5sZW5ndGggKQogICAgICB0aGlzLmdyb3VwID0gbGlzdFtyYW5kb21dIC8vIOihqOekuueUqOWkieaVsOOBq+S7o+WFpQogICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5ub3dbbGlzdFtyYW5kb21dXS5pbmRleE9mKCJuaWwiKQoKICAgICAgZGF0YWJhc2UucmVmKGBzZWF0cy9Ob3cvJHtsaXN0W3JhbmRvbV19LyR7dGFyZ2V0fWApLnNldCh1aWQpCiAgICB9LAogICAgcmVzZXJ2YXRpb25BdHRlbmRhbmNlKHVpZCwgc2VhdCkgeyAvLyDkuojntITjgZfjgZ/luK3jgpLnorrlrpooOTozMOS7peWJjeS6iOe0hOOBl+OBn+S6uueUqCkKICAgICAgbGV0IGRhdGFiYXNlID0gZmlyZWJhc2UuZGF0YWJhc2UoKQogICAgICBzZWF0ID0gTnVtYmVyKHNlYXQpCiAgICAgIHRoaXMuZ3JvdXAgPSBzZWF0IC8vIOihqOekuueUqOWkieaVsOOBq+S7o+WFpQogICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5ub3dbc2VhdF0uaW5kZXhPZigibmlsIikKICAgICAgZGF0YWJhc2UucmVmKGBzZWF0cy9Ob3cvJHtzZWF0fS8ke3RhcmdldH1gKS5zZXQodWlkKQogICAgfSwKICAgIHJlbW92ZU15TnVtYmVyKCkgewogICAgICBsZXQgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpCiAgICAgIGRhdGFiYXNlLnJlZihgYXR0ZW5kYW5jZS8ke3RoaXMuJHJvdXRlLnBhcmFtcy5udW1iZXJ9YCkucmVtb3ZlKCkKICAgICAgY29uc29sZS5kZWJ1Zyh0aGlzLiRyb3V0ZS5wYXJhbXMubnVtYmVyKQogICAgfSwKICAgIHBhZ2VSZXR1cm4oKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYXR0ZW5kYW5jZSIpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Attendance_result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Attendance_result.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n  <div>\n    <Clock/>\n\n    <Indeterminate v-if=\"loading\"/>\n\n    <div v-else>\n      <div v-if=\"show\">\n\n        <v-row v-if=\"select\" :justify=\"'center'\">\n          <v-col class=\"d-flex\" cols=\"5\">\n            <v-select\n              v-model=\"selectGroup\"\n\n              :items=\"items\"\n              label=\"グループを選んでください\"\n            ></v-select>\n\n          </v-col>\n          <v-col cols=\"1\">\n            <v-fab-transition>\n              <v-btn\n                class=\"pink\"\n                fab\n                dark\n                required\n                @click=\"selectAttendance()\"\n              >\n                <v-icon>mdi-send</v-icon>\n              </v-btn>\n\n            </v-fab-transition>\n          </v-col>\n        </v-row>\n\n        <div v-else>\n          <h1 class=\"text-center display-3\">{{ realName }}さんの席が確定しました！</h1>\n          <h1 class=\"text-center\">あなたはグループ{{ group+1 }}です。</h1>\n        </div>\n\n        <v-row :justify=\"'center'\">\n          <v-col cols=\"10\">\n            <NowSeatWrapCard/>\n          </v-col>\n        </v-row>\n\n      </div>\n      <div v-else>\n        <h1 class=\"text-center display-3\">番号が存在しませんでした</h1>\n        <p class=\"text-center\">1分経つと番号は無効になります。もう一度発行してください</p>\n      </div>\n\n\n\n      <v-row class=\"mt-12\" :justify=\"'center'\">\n        <v-col class=\"mt-12\" cols=\"1\">\n          <v-btn outlined x-large fab color=\"cyan\" @click=\"pageReturn()\">\n            <v-icon>mdi-keyboard-return</v-icon>\n          </v-btn>\n        </v-col>\n      </v-row>\n    </div>\n\n\n\n\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase/app'\nimport 'firebase/database'\nimport 'firebase/storage'\nimport Clock from './Clock'\nimport NowSeatWrapCard from './NowSeatWrapCard'\nimport Indeterminate from './Indeterminate'\n\nexport default {\n  data() {\n    return {\n      loading: true,\n      show: false,\n      select: false,\n      realName: '',\n      uid: '',\n      group: '',\n      items: [],\n      selectGroup: '',\n      now: []\n    }\n  },\n  components: {\n    Clock,\n    NowSeatWrapCard,\n    Indeterminate\n  },\n  created() {\n    this.searchInputNumber()\n    setTimeout(()=> {\n      this.loading=false\n    }, 1000)\n  },\n  methods: {\n    async searchInputNumber() {\n      let attendanceData = await this.getAttendanceData()\n      let number = this.$route.params.number\n      console.debug(attendanceData)\n\n      this.show = number in attendanceData\n      if (this.show) {\n        let seat = attendanceData[number]['seat']\n        let uid = attendanceData[number]['uid']\n        this.uid = uid\n        let userData = await this.getUserData(uid)\n        let now = await this.getNowData()\n        this.now = now\n        this.realName = userData['realName']\n        console.debug(userData)\n\n        let date = new Date(2020, 1,1,18,59,0) //new Date(2020, 1, 1, 9, 30, 0) // 比較対象Date\n        let nowDate = new Date() // 現在時刻\n\n        if (date.getHours() >= nowDate.getHours() && date.getMinutes() >= nowDate.getMinutes()) {\n          // ９時半以前だったら\n          console.debug(\"９時半以前\")\n          if (seat == \"nil\") {\n            // 予約していなかったら\n            this.select = true\n            await this.initSelectItem()\n          } else {\n            // 予約していたら\n            await this.reservationAttendance(uid,seat)\n          }\n        } else {\n          // ９時半以降だったら\n          console.debug(\"９時半以降\")\n          await this.randomAttendance(uid)\n        }\n        // 入力されたIDの削除\n        this.removeMyNumber()\n\n      }\n    },\n    getAttendanceData() { // attendanceの情報一覧をとってくる\n      let database = firebase.database()\n      let attendance = database.ref('attendance/')\n      return new Promise(function(resolve) {\n        attendance.on('value', (snapshot)=> {\n          let val = snapshot.val()\n          delete val['nil'] // 空データの削除\n          resolve(val)\n        })\n      })\n    },\n    getUserData(uid) { // ユーザー情報をとってくる\n      let database = firebase.database()\n      let user = database.ref(`users/${uid}`)\n      return new Promise(function(resolve) {\n        user.on('value', (snapshot)=> {\n          resolve(snapshot.val())\n        })\n      })\n    },\n    getNowData() { // now情報をとってくる\n      let database = firebase.database()\n      let now = database.ref('seats/Now')\n      return new Promise(function(resolve) {\n        now.on('value', (snapshot)=> {\n          resolve(snapshot.val())\n        })\n      })\n    },\n    getReservationData() {\n      let database = firebase.database()\n      let now = new Date(2020,1,6)//new Date()\n      let week = [\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"]\n      console.debug(now.getDay())\n      if (now.getDay() != 0 && now.getDay() != 6) {\n        let dayOfWeek = week[now.getDay()-1]\n        let reservation = database.ref(`seats/${dayOfWeek}`)\n\n        return new Promise(function(resolve) {\n          reservation.on('value', (snapshot)=> {\n            resolve(snapshot.val())\n          })\n        })\n      }\n    },\n\n    async initSelectItem() { // セレクトを初期化する\n      let now = this.now\n      let reservation = await this.getReservationData()\n      console.debug(reservation)\n      for (let i=0; i<15; i++) {\n        // nilを消す\n        let x = now[i].filter(function( item ) { return item != \"nil\" })\n        let y = reservation[i].filter(function( item ) { return item != \"nil\" })\n        console.debug('x',x)\n        console.debug('y',y)\n        if ((x.length + y.length) != 6) {\n          this.items.push(`グループ${i+1}`)\n        }\n      }\n      this.selectGroup = this.items[0]\n    },\n    selectAttendance() { // セレクタの数字の席で確定(9:30以前予約してない人用)\n      let database = firebase.database()\n      let seat = this.selectGroup.replace('グループ','')-1\n      let target = this.now[seat].indexOf(\"nil\")\n      database.ref(`seats/Now/${seat}/${target}`).set(this.uid)\n      this.pageReturn()\n    },\n    randomAttendance(uid) { // ランダムに席を確定(9:30以降用)\n      let database = firebase.database()\n      let now = this.now\n      let nowCount = []\n\n      for (let i=0; i<15; i++) {\n        // nilを消す\n        let x = now[i].filter(function( item ) { return item != \"nil\" })\n        nowCount.push(x.length)\n      }\n      let min = Math.min.apply(null, nowCount) // 最小値を取得\n      console.debug(nowCount)\n      console.debug(min)\n      // 最小値のグループIDを保存する\n      let list = []\n      for (let i=0; i<15; i++) {\n        if (nowCount[i] == min) {\n          list.push(i)\n        }\n      }\n      console.debug(list)\n\n      // 乱数の生成\n      let random = Math.floor( Math.random() * list.length )\n      this.group = list[random] // 表示用変数に代入\n      let target = this.now[list[random]].indexOf(\"nil\")\n\n      database.ref(`seats/Now/${list[random]}/${target}`).set(uid)\n    },\n    reservationAttendance(uid, seat) { // 予約した席を確定(9:30以前予約した人用)\n      let database = firebase.database()\n      seat = Number(seat)\n      this.group = seat // 表示用変数に代入\n      let target = this.now[seat].indexOf(\"nil\")\n      database.ref(`seats/Now/${seat}/${target}`).set(uid)\n    },\n    removeMyNumber() {\n      let database = firebase.database()\n      database.ref(`attendance/${this.$route.params.number}`).remove()\n      console.debug(this.$route.params.number)\n    },\n    pageReturn() {\n      this.$router.push(\"/attendance\")\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n</style>\n"]}]}
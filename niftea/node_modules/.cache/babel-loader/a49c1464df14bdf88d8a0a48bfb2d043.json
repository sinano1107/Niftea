{"remainingRequest":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/thread-loader/dist/cjs.js!/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/babel-loader/lib/index.js!/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/choumasateru/Desktop/development_direction/vue/niftea/src/components/NowSeatCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/src/components/NowSeatCard.vue","mtime":1578226723249},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/choumasateru/Desktop/development_direction/vue/niftea/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UvYXBwJzsKaW1wb3J0ICdmaXJlYmFzZS9kYXRhYmFzZSc7CmltcG9ydCAnZmlyZWJhc2Uvc3RvcmFnZSc7CmltcG9ydCBJbmRldGVybWluYXRlIGZyb20gJy4vSW5kZXRlcm1pbmF0ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHVzZXJEYXRhOiBbXSwKICAgICAgaW1nVVJMOiB7fQogICAgfTsKICB9LAogIHByb3BzOiBbJ2lkJ10sCiAgY29tcG9uZW50czogewogICAgSW5kZXRlcm1pbmF0ZTogSW5kZXRlcm1pbmF0ZQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIG5vd0RhdGEsIGltZ0xpc3QsIGksIF9pOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBpbml0JChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHRoaXMuZ2V0Tm93RGF0YSgpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBub3dEYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpbWdMaXN0ID0gW107CiAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgaWYgKCEoaSA8IG5vd0RhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IGltZ0xpc3Q7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh0aGlzLmdldFVzZXJEYXRhKG5vd0RhdGFbaV0pKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIF9jb250ZXh0LnQwLnB1c2guY2FsbChfY29udGV4dC50MCwgX2NvbnRleHQudDEpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIF9pID0gMDsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgaWYgKCEoX2kgPCBpbWdMaXN0Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5nZXRVc2VySW1nKGltZ0xpc3RbX2ldKSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIHRoaXMuaW1nVVJMW2ltZ0xpc3RbX2ldXSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIF9pKys7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAvLyB0aGlzLmxvYWRpbmfjgpJmYWxzZeOBq+OBmeOCiwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgZ2V0Tm93RGF0YTogZnVuY3Rpb24gZ2V0Tm93RGF0YSgpIHsKICAgICAgdmFyIGRhdGFiYXNlID0gZmlyZWJhc2UuZGF0YWJhc2UoKTsKICAgICAgdmFyIG5vdyA9IGRhdGFiYXNlLnJlZigic2VhdHMvTm93LyIuY29uY2F0KHRoaXMuaWQpKTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBub3cub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICB2YXIgdmFsID0gc25hcHNob3QudmFsKCk7IC8vIG5pbOOCkua2iOOBmQoKICAgICAgICAgIHZhbCA9IHZhbC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0gIT0gIm5pbCI7CiAgICAgICAgICB9KTsgLy8gdmFs44Gr5YCk44GM5a2Y5Zyo44GZ44KM44GwdGhpcy5zaG9344KSdHJ1ZeOBq+OBmeOCiwoKICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzZWxmLnNob3cgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc29sdmUodmFsKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0VXNlckRhdGE6IGZ1bmN0aW9uIGdldFVzZXJEYXRhKHVpZCkgewogICAgICB2YXIgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciB1c2VyRGF0YSA9IGRhdGFiYXNlLnJlZigiL3VzZXJzLyIuY29uY2F0KHVpZCkpOwogICAgICAgIHVzZXJEYXRhLm9uKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgdmFyIHZhbCA9IHNuYXBzaG90LnZhbCgpOwogICAgICAgICAgc2VsZi51c2VyRGF0YS5wdXNoKHZhbCk7CiAgICAgICAgICByZXNvbHZlKHZhbC5pbWcpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRVc2VySW1nOiBmdW5jdGlvbiBnZXRVc2VySW1nKGltZykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgc3RvcmFnZSA9IGZpcmViYXNlLnN0b3JhZ2UoKTsKICAgICAgICB2YXIgaW1nUmVmID0gc3RvcmFnZS5yZWYoIiIuY29uY2F0KGltZykpOwogICAgICAgIGltZ1JlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsKCiAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgcmVzb2x2ZShVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTsKICAgICAgICAgIH07CgogICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7CiAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["NowSeatCard.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"html\">\n  <v-hover v-slot:default=\"{ hover }\">\n    <v-card\n      class=\"mx-auto\"\n      max-width=\"344\"\n      :elevation=\"hover ? 12 : 2\"\n    >\n      <v-list-item three-line>\n        <v-list-item-content>\n          <div class=\"overline mb-4\">グループ{{ id+1 }}</div>\n\n          <v-chip-group\n            column\n            active-class=\"primary--text\"\n            v-if=\"show\"\n          >\n            <Indeterminate v-if=\"loading\" />\n            <v-chip v-else v-for=\"(item,i) in userData\" :key=\"i\">\n              <v-avatar left>\n                <v-img :src=\"imgURL[item.img]\"></v-img>\n              </v-avatar>\n              {{ item.realName }}\n            </v-chip>\n          </v-chip-group>\n\n          <v-list-item-subtitle v-else>だれもいません</v-list-item-subtitle>\n        </v-list-item-content>\n\n\n      </v-list-item>\n    </v-card>\n  </v-hover>\n</template>\n\n<script>\nimport firebase from 'firebase/app'\nimport 'firebase/database'\nimport 'firebase/storage'\nimport Indeterminate from './Indeterminate'\n\nexport default {\n  data() {\n    return {\n      show: false,\n      loading: true,\n      userData: [],\n      imgURL: {}\n    }\n  },\n  props: ['id'],\n  components: {\n    Indeterminate\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      let nowData = await this.getNowData()\n      let imgList = []\n\n      for (let i=0; i<nowData.length; i++) {\n        imgList.push(await this.getUserData(nowData[i]))\n      }\n\n      for (let i=0; i<imgList.length; i++) {\n        this.imgURL[imgList[i]] = await this.getUserImg(imgList[i])\n      }\n\n      // this.loadingをfalseにする\n      this.loading = false\n    },\n    getNowData() {\n      let database = firebase.database()\n      let now = database.ref(`seats/Now/${this.id}`)\n      let self = this\n\n      return new Promise(function(resolve) {\n        now.on('value', (snapshot)=> {\n          let val = snapshot.val()\n          // nilを消す\n          val = val.filter(function( item ) { return item != \"nil\" })\n          // valに値が存在すればthis.showをtrueにする\n          if (val.length > 0) {\n            self.show = true\n          }\n          resolve(val)\n        })\n      })\n    },\n    getUserData(uid) {\n      let database = firebase.database()\n      let self = this\n\n      return new Promise(function(resolve) {\n        let userData = database.ref(`/users/${uid}`)\n        userData.on('value', (snapshot)=> {\n          let val = snapshot.val()\n          self.userData.push(val)\n          resolve(val.img)\n        })\n      })\n    },\n    getUserImg(img) {\n\n\n      return new Promise(function(resolve) {\n        let storage = firebase.storage()\n        let imgRef = storage.ref(`${img}`)\n        imgRef.getDownloadURL().then((url)=> {\n          let xhr = new XMLHttpRequest()\n          xhr.responseType = 'blob'\n          xhr.onload = ()=> {\n            let blob = xhr.response\n            resolve(URL.createObjectURL(blob))\n          }\n          xhr.open('GET', url)\n          xhr.send()\n        })\n      })\n\n\n\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n</style>\n"],"sourceRoot":"src/components"}]}